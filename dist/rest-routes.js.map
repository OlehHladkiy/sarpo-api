{"version":3,"sources":["../src/rest-routes.ts"],"names":["isAuthenticated","req","res","next","get","appConfig","internalAuthToken","status","send","applyMiddlewares","app","use","bodyParser","json","limit","urlencoded","extended","registerRestEndpoints","_","R","pick"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEA;;AAEA;;;;;;;;AAEA;AACA,MAAMA,eAAwB,GAAG,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAC/BF,GAAG,CAACG,GAAJ,CAAQ,eAAR,MAA6BC,mBAAUC,iBAAvC,GACIH,IAAI,EADR,GAEID,GAAG,CAACK,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,yBAArB,CAHN;;AAKA,MAAMC,gBAAgB,GAAIC,GAAD,IAAsB;AAC7CA,EAAAA,GAAG,CAACC,GAAJ,CAAQ,2BAAR;AACAD,EAAAA,GAAG,CAACC,GAAJ,CAAQC,oBAAWC,IAAX,CAAgB;AAAEC,IAAAA,KAAK,EAAE;AAAT,GAAhB,CAAR;AACAJ,EAAAA,GAAG,CAACC,GAAJ,CAAQC,oBAAWG,UAAX,CAAsB;AAAEC,IAAAA,QAAQ,EAAE;AAAZ,GAAtB,CAAR;AACAN,EAAAA,GAAG,CAACC,GAAJ,CAAQ,oBAAR;AACD,CALD;;AAOO,MAAMM,qBAAqB,GAAIP,GAAD,IAAsB;AACzDD,EAAAA,gBAAgB,CAACC,GAAD,CAAhB;AAEAA,EAAAA,GAAG,CAACN,GAAJ,CAAQ,GAAR,EAAa,CAACc,CAAD,EAAIhB,GAAJ,KAAYA,GAAG,CAACW,IAAJ,CAASM,CAAC,CAACC,IAAF,CAAO,CAAC,MAAD,EAAS,SAAT,CAAP,EAA4Bf,kBAA5B,CAAT,CAAzB;AACD,CAJM","sourcesContent":["import bodyParser from 'body-parser';\nimport { unauthorized } from 'boom';\nimport compression from 'compression';\nimport cors from 'cors';\nimport { Application, Handler } from 'express';\nimport * as R from 'ramda';\n\nimport appConfig from '@config/appConfig';\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst isAuthenticated: Handler = (req, res, next) =>\n  req.get('Authorization') === appConfig.internalAuthToken\n    ? next()\n    : res.status(401).send(unauthorized());\n\nconst applyMiddlewares = (app: Application) => {\n  app.use(compression());\n  app.use(bodyParser.json({ limit: '1mb' }));\n  app.use(bodyParser.urlencoded({ extended: true }));\n  app.use(cors());\n};\n\nexport const registerRestEndpoints = (app: Application) => {\n  applyMiddlewares(app);\n\n  app.get('/', (_, res) => res.json(R.pick(['name', 'version'], appConfig)));\n};\n"],"file":"rest-routes.js"}